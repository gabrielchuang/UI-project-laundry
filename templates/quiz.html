<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>{{ quiz.title }}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />
        <link
            rel="stylesheet"
            href="{{ url_for('static', filename='style.css') }}"
        />
    </head>
    <body class="d-flex justify-content-center">
        <div class="w-75">
            <!-- HEADER -->
            <div class="page-header text-center text-dark py-4 mx-3 my-4">
                <h1 class="m-0">{{ quiz.title }}</h1>
            </div>

            <!-- IMAGE IF PRESENT -->
            {% if quiz.img %}
            <div class="text-center mb-4">
                <img
                    src="{{ url_for('static', filename=quiz.img) }}"
                    alt="Quiz Image"
                    class="img-fluid rounded"
                    style="max-width: 300px"
                />
            </div>
            {% endif %}

            <!-- QUIZ FORM -->
            <form method="POST">
                {% for q_index in range(quiz.questions|length) %} {% set q =
                quiz.questions[q_index] %}
                <div class="mb-5">
                    <h5>
                        <strong>Q{{ q_index + 1 }}: {{ q.question }}</strong>
                    </h5>

                    {% if q.options %} {% for opt_index in
                    range(q.options|length) %} {% set opt = q.options[opt_index]
                    %}
                    <div class="form-check text-start">
                        <input
                            class="form-check-input"
                            type="radio"
                            name="q{{ q_index }}"
                            id="q{{ q_index }}_{{ opt_index }}"
                            value="{{ opt }}"
                            required
                        />
                        <label
                            class="form-check-label"
                            for="q{{ q_index }}_{{ opt_index }}"
                        >
                            {{ opt }}
                        </label>
                    </div>
                    {% endfor %} {% endif %}
                </div>
                {% endfor %} 
                
                {% if show_score %}
                <div class="alert alert-success text-center">
                    ✅ You scored <strong>{{ score }}</strong> out of
                    <strong>{{ quiz.questions[:3] | length }}</strong>.
                </div>
                {% endif %}

                <button type="submit" class="btn btn-primary">Submit</button>
                <a href="/" class="btn btn-outline-secondary ms-2"
                    >← Back to Home</a
                >
            </form>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>
